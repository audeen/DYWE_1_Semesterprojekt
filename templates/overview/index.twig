{% extends "_layout" %}

{% set aktuelles, projekte, opensource, mods, Impressum, Datenschutz, Kontakt, Links, About = '','','','','','','','','' %}

{% set segment = craft.app.request.getSegment(1) %}
{% switch segment %}
    {% case "aktuellesOverview" %}
        {% set aktuelles = 'current' %}
		{% set page_title = 'Aktuelles' %}
        {% paginate craft.entries.section('aktuelles').limit(settings.articlesPerPage) as pageInfo, pageEntries %}
    {% case "projekteOverview" %}
        {% set projekte = 'current' %}
		{% set page_title = 'Projekte' %}
        {% paginate craft.entries.section('projekte').limit(settings.articlesPerPage) as pageInfo, pageEntries %}
    {% case "opensourceOverview" %}
        {% set opensource = 'current' %}
		{% set page_title = 'Open-Source' %}
        {% paginate craft.entries.section('opensource').limit(settings.articlesPerPage) as pageInfo, pageEntries %}
    {% case "modsOverview" %}
        {% set mods = 'current' %}
		{% set page_title = 'Mods' %}
        {% paginate craft.entries.section('mods').limit(settings.articlesPerPage) as pageInfo, pageEntries %}
{% endswitch %}

{% block content %}
    {% for entry in pageEntries %}
        <div class="artikel_1">
            {% for block in entry.artikel.all() %}
                {% switch block.type %}
                    {% case "artikelPreview" %}
                        {% for image in block.artikelThumbnail.all() %}
                            <figure class="artikelThumbnail">
                                <a href="{{ image.getUrl() }}" target="_blank">
                                    <img src="{{ image.getUrl('smallThumb') }}" alt="{{ image }}">
                                </a>
                            </figure>
                        {% endfor %}	
                        <div>
                            <div class="headline">
                                <a href="{{ entry.url }}">{{ entry.title }}</a>
                            </div>
                            <div class="teaser">{{ block.previewteaser }}</div>
                            <div class="abody">
                                {{ block.previewbody }}
                            </div>
                            <div class="button">
                                <a href="{{ entry.url }}">weiterlesen</a>
                            </div>
                        </div>
                {% endswitch %}	
            {% endfor %}
        </div>
        <hr>
    {% endfor %}
    <div class="pagination">
        {# Vorherige Seite, falls verfügbar: #}
        {% if pageInfo.prevUrl %}
            <div class="button_hover">
                <div class="button">
                    <a href="{{ pageInfo.prevUrl }}"><<</a>
                </div>
                <div class="button_back">
                    <a href="{{ pageInfo.prevUrl }}">Seite zur&uuml;ck</a>
                </div>
            </div>
        {% endif %}
        {# Aktuelle Seitenzahl: #}
        <div class="aktuell">
            <div class="button">
                Seite {{ pageInfo.currentPage }}
            </div>
            <div class="aktuell_hover">
                aktuelle Seite
            </div>
        </div>
        {# Nächste Seite, falls verfügbar: #}
        {% if pageInfo.nextUrl %}
            <div class="button_hover">
                <div class="button">
                    <a href="{{ pageInfo.nextUrl }}">>></a>
                </div>
                <div class="button_pre">
                    <a href="{{ pageInfo.nextUrl }}">Seite vor</a>
                </div>
            </div>
        {% endif %}
    </div>
{% endblock %}